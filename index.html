<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Invoice Calculator</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen py-8">
  <div class="max-w-md mx-auto bg-white rounded-2xl shadow-xl p-8">
    <div class="text-center mb-8">
      <h1 class="text-3xl font-bold text-gray-800 mb-2">Invoice Calculator</h1>
      <p class="text-gray-600">Calculate taxes on services and goods</p>
    </div>

    <div class="space-y-6">
      <!-- Amount Input -->
      <div>
        <label for="amount" class="block text-sm font-semibold text-gray-700 mb-2">Invoice Amount (Including VAT)</label>
        <div class="relative">
          <span class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 font-medium">₱</span>
          <input 
            type="number" 
            id="amount" 
            placeholder="0.00" 
            step="0.01"
            class="w-full pl-8 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none text-lg"
          >
        </div>
        <p class="text-xs text-gray-500 mt-1">Enter the total amount including 12% VAT</p>
      </div>

      <!-- Type Selection -->
      <div>
        <label class="block text-sm font-semibold text-gray-700 mb-3">Transaction Type</label>
        <div class="grid grid-cols-3 gap-2">
          <button 
            id="servicesBtn" 
            class="type-btn bg-blue-500 text-white py-3 px-3 rounded-lg font-medium hover:bg-blue-600 transition-colors text-sm"
            data-type="services"
          >
            Services (2%)
          </button>
          <button 
            id="goodsBtn" 
            class="type-btn bg-gray-200 text-gray-700 py-3 px-3 rounded-lg font-medium hover:bg-gray-300 transition-colors text-sm"
            data-type="goods"
          >
            Goods (1%)
          </button>
          <button 
            id="governmentBtn" 
            class="type-btn bg-gray-200 text-gray-700 py-3 px-3 rounded-lg font-medium hover:bg-gray-300 transition-colors text-sm"
            data-type="government"
          >
            Government (5%)
          </button>
        </div>
      </div>

      <!-- Results -->
      <div id="results" class="hidden bg-gray-50 rounded-lg p-6 space-y-3">
        <div class="flex justify-between items-center">
          <span class="text-gray-600 font-medium">Invoice Amount (With VAT):</span>
          <span id="grossAmount" class="copyable relative group text-lg font-bold text-gray-800 cursor-pointer hover:bg-gray-200 px-1 rounded">
            ₱0.00
            <span class="tooltip absolute -top-7 left-1/2 -translate-x-1/2 bg-black text-white text-xs px-2 py-1 rounded opacity-0 transition">Copied!</span>
          </span>
        </div>
        <div class="flex justify-between items-center">
          <span class="text-gray-600 font-medium">VAT Amount (12%):</span>
          <span id="vatAmount" class="copyable relative group text-lg font-bold text-orange-600 cursor-pointer hover:bg-gray-200 px-1 rounded">
            ₱0.00
            <span class="tooltip absolute -top-7 left-1/2 -translate-x-1/2 bg-black text-white text-xs px-2 py-1 rounded opacity-0 transition">Copied!</span>
          </span>
        </div>
        <div class="flex justify-between items-center">
          <span class="text-gray-600 font-medium">Net Amount (VAT Excluded):</span>
          <span id="netOfVat" class="copyable relative group text-lg font-bold text-gray-800 cursor-pointer hover:bg-gray-200 px-1 rounded">
            ₱0.00
            <span class="tooltip absolute -top-7 left-1/2 -translate-x-1/2 bg-black text-white text-xs px-2 py-1 rounded opacity-0 transition">Copied!</span>
          </span>
        </div>
        <div class="flex justify-between items-center">
          <span class="text-gray-600 font-medium">Withholding Tax Rate:</span>
          <span id="taxRate" class="copyable relative group text-lg font-bold text-blue-600 cursor-pointer hover:bg-gray-200 px-1 rounded">
            0%
            <span class="tooltip absolute -top-7 left-1/2 -translate-x-1/2 bg-black text-white text-xs px-2 py-1 rounded opacity-0 transition">Copied!</span>
          </span>
        </div>
        <div class="flex justify-between items-center">
          <span class="text-gray-600 font-medium">Withholding Tax:</span>
          <span id="taxAmount" class="copyable relative group text-lg font-bold text-red-600 cursor-pointer hover:bg-gray-200 px-1 rounded">
            ₱0.00
            <span class="tooltip absolute -top-7 left-1/2 -translate-x-1/2 bg-black text-white text-xs px-2 py-1 rounded opacity-0 transition">Copied!</span>
          </span>
        </div>
        <hr class="border-gray-300">
        <div class="flex justify-between items-center">
          <span class="text-gray-800 font-bold text-lg">Amount Due:</span>
          <span id="finalAmount" class="copyable relative group text-xl font-bold text-green-600 cursor-pointer hover:bg-gray-200 px-1 rounded">
            ₱0.00
            <span class="tooltip absolute -top-7 left-1/2 -translate-x-1/2 bg-black text-white text-xs px-2 py-1 rounded opacity-0 transition">Copied!</span>
          </span>
        </div>
      </div>

      <!-- Clear Button -->
      <button 
        id="clearBtn" 
        class="w-full bg-gray-500 text-white py-3 rounded-lg font-medium hover:bg-gray-600 transition-colors"
      >
        Clear
      </button>
    </div>
  </div>

  <script>
    let selectedType = 'services';
    
    const typeButtons = document.querySelectorAll('.type-btn');
    const servicesBtn = document.getElementById('servicesBtn');
    const goodsBtn = document.getElementById('goodsBtn');
    const governmentBtn = document.getElementById('governmentBtn');
    
    typeButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        selectedType = btn.dataset.type;
        
        typeButtons.forEach(b => {
          b.classList.remove('bg-blue-500', 'text-white');
          b.classList.add('bg-gray-200', 'text-gray-700');
        });
        
        btn.classList.remove('bg-gray-200', 'text-white');
        btn.classList.add('bg-blue-500', 'text-white');
        
        const amount = parseFloat(document.getElementById('amount').value);
        if (amount && amount > 0) {
          calculateTax();
        }
      });
    });
    
    function calculateTax() {
      const grossAmount = parseFloat(document.getElementById('amount').value);
      
      if (!grossAmount || grossAmount <= 0) {
        document.getElementById('results').classList.add('hidden');
        return;
      }
      
      const vatRate = 0.12;
      const vatAmount = grossAmount * (vatRate / (1 + vatRate));
      const netOfVat = grossAmount - vatAmount;
      
      let withholdingRate;
      if (selectedType === 'services') {
        withholdingRate = 0.02;
      } else if (selectedType === 'goods') {
        withholdingRate = 0.01;
      } else if (selectedType === 'government') {
        withholdingRate = 0.05;
      }
      let withholdingTax = netOfVat * withholdingRate;
      let finalAmountToPay = grossAmount - withholdingTax;
      
      function formatCurrency(amount) {
        return `₱${amount.toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,')}`;
      }
      
      document.getElementById('grossAmount').childNodes[0].textContent = formatCurrency(grossAmount);
      document.getElementById('vatAmount').childNodes[0].textContent = formatCurrency(vatAmount);
      document.getElementById('netOfVat').childNodes[0].textContent = formatCurrency(netOfVat);
      document.getElementById('taxRate').childNodes[0].textContent = `${(withholdingRate * 100)}%`;
      document.getElementById('taxAmount').childNodes[0].textContent = formatCurrency(withholdingTax);
      document.getElementById('finalAmount').childNodes[0].textContent = formatCurrency(finalAmountToPay);
      
      document.getElementById('results').classList.remove('hidden');
    }
    
    function copyToClipboard(text, el) {
      // Remove peso signs, percent signs, commas, and spaces
      const cleaned = text.replace(/[₱,%]/g, '').trim();
      navigator.clipboard.writeText(cleaned).then(() => {
        const tooltip = el.querySelector('.tooltip');
        tooltip.classList.remove('opacity-0');
        tooltip.classList.add('opacity-100');
        setTimeout(() => {
          tooltip.classList.add('opacity-0');
          tooltip.classList.remove('opacity-100');
        }, 1000);
      });
    }
    
    document.querySelectorAll('.copyable').forEach(el => {
      el.addEventListener('click', () => {
        copyToClipboard(el.childNodes[0].textContent.trim(), el);
      });
    });
    
    document.getElementById('clearBtn').addEventListener('click', () => {
      document.getElementById('amount').value = '';
      document.getElementById('results').classList.add('hidden');
      
      selectedType = 'services';
      typeButtons.forEach(b => {
        b.classList.remove('bg-blue-500', 'text-white');
        b.classList.add('bg-gray-200', 'text-gray-700');
      });
      servicesBtn.classList.remove('bg-gray-200', 'text-gray-700');
      servicesBtn.classList.add('bg-blue-500', 'text-white');
    });
    
    document.getElementById('amount').addEventListener('input', () => {
      calculateTax();
    });
    
    document.getElementById('amount').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        calculateTax();
      }
    });
  </script>
</body>
</html>
